{% extends "base/base-customer.html" %}

{% block title %}{{ _("The Siren - 403 Forbidden") }}{% endblock %}

{#  for links to css #}
{% block style %}
    <link rel="icon" href="../../static/images/half-logo.png">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"
          integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">
    <link rel="stylesheet" href="../../static/fonts/font-awesome-4.7.0/font-awesome-4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="../../static/css/chat/chatroom_customer.css">

    <link href="../../../static/css/normalize.css" rel="stylesheet" type="text/css">
    <link href="../../../static/css/webflow.css" rel="stylesheet" type="text/css">
    <link href="../../../static/css/jacks-supercool-site-c6dd88.webflow.css" rel="stylesheet" type="text/css">

    <!-- [if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"
            type="text/javascript"></script><![endif] -->
    <script type="text/javascript">!function (o, c)
    {
        var n = c.documentElement, t = " w-mod-";
        n.className += t + "js", ("ontouchstart" in o || o.DocumentTouch && c instanceof DocumentTouch) && (n.className += t + "touch")
    }(window, document);</script>
    <link href="images/favicon.ico" rel="shortcut icon" type="image/x-icon">
    <link href="images/webclip.png" rel="apple-touch-icon">
    <style>
        body {
            -moz-osx-font-smoothing: grayscale;
            -webkit-font-smoothing: antialiased;
        }

        select, input, textarea {
            -webkit-appearance: none;
        }
    </style>
{% endblock %}



{# content #}
{% block content %}
    <html data-wf-page="6221c36b59f19804945ac5ff" data-wf-site="6221c36b59f1986aa65ac5f0">
        <body>
            <div class="padding">
                <div class="row justify-content-center">
                    <div class="middle-box">
                        <div class="box box-warning direct-chat direct-chat-warning">
                            <div class="box-header with-border">
                                <h3 class="box-title">{{ _("Chat Messages") }}</h3>
                            </div>
                            <div class="box-body">
                                <!--chat window-->
                                <div id="chat-window1" class="direct-chat-messages">

                                    <!--staff chat-->
                                    <div class="direct-chat-msg">
                                        <div class="direct-chat-info clearfix">
                                            <span class="direct-chat-name pull-left">Timona Siera</span>
                                            <span class="direct-chat-timestamp pull-right">23 Jan 2:00 pm</span>
                                        </div>

                                        <img class="direct-chat-img" src="https://img.icons8.com/color/36/000000/administrator-male.png"
                                             alt="message user image">

                                        <div class="direct-chat-text">
                                            For what reason would it be advisable for me to think about business content?
                                        </div>
                                    </div>

                                    <!--customer chat-->
                                    <div class="direct-chat-msg right">
                                        <div class="direct-chat-info clearfix">
                                            <span class="direct-chat-name pull-right">Sarah Bullock</span>
                                            <span class="direct-chat-timestamp pull-left">23 Jan 2:05 pm</span>
                                        </div>

                                        <img class="direct-chat-img" src="https://img.icons8.com/office/36/000000/person-female.png" alt="message user image">

                                        <div class="direct-chat-text">
{#                                            Thank you for your believe in our supports#}
                                            <div role="listitem" class="w-dyn-item product-box" style="padding: 10">
                                                <table class="commodity-table">
                                                    <tr>
                                                        <td class="commodity-image-cell">
                                                            <div class="img_container">
                                                                <!-- product picture -->
                                                                {% if rec_preference_pro.pictures.first() == None %}
                                                                    <img src="../../static/images/example/yamaha_yep621s.jpg"
                                                                         loading="lazy" alt="">
                                                                {% else %}
                                                                    <img src="{{ url_for("static",filename=rec_preference_pro.pictures.first().address) }}"
                                                                         loading="lazy" alt="">
                                                                {% endif %}
                                                            </div>
                                                        </td>
                                                        <td class="commodity-info-cell">
                                                            <div class="box-product-info-card">
                                                    Product price
                                                    <div class="my-price-container">
                                                        <div class="new-price">
                                                            <span>ï¿¥</span><span>{{ rec_preference_pro.price }}</span>
                                                        </div>
                                                    </div>

                                                    Product name
                                                    <div class="no-bottom-margin box-product-name">
                                                        {{ rec_preference_pro.name }}
                                                    </div>
                                                </div>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>


                            <div class="box-footer">
                                <form action="#" method="post">
                                    <div class="input-group">
                                        <input id="user_message" type="text" name="message" placeholder="{{ _("Type Message ...") }}"
                                               class="form-control user-message-input-blank" room-id="{{ rooms.id }}">
                                        <span class="input-group-btn">
                                            <button id="send-message-{{ rooms.id }}" type="button" class="btn btn-warning btn-flat">
                                                {{ _("Send") }}
                                            </button>
                                        </span>
                                    </div>
                                </form>
                            </div>

                            <!--get avatar for socketio_customer-->
                            <div id="chatroom-avatar-{{ rooms.id }}" style="display: none;"
                                 avatar-customer="{{ url_for('static', filename=rooms.customer.avatar) }}"
                                 avatar-staff="{{ url_for('static', filename=rooms.staff.avatar) }}">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Get username -->
            <script type="text/javascript">
                let chatroom_id = '{{ current_user.chat_rooms_customer.first().id }}';
                console.log(chatroom_id);
                let username = '{{ current_user.username }}';
                let avatar = '{{ current_user.avatar }}';
                let staffName = '{{ rooms.staff.username }}';
                let entranceType = '{{ entrance_type }}';

                {% if entrance_type == 'consult' %}

                    let modelTypeId = {{ model_type_id }};

                {% elif entrance_type == 'after-sale' %}

                    let orderId = {{ order_id }};

                {% endif %}
            </script>
            <!--Customer Chat socket-->
            <script type="text/javascript" src="../../static/js/chat/socketio_customer.js"></script>
            <!-- SocketIO JS -->
            <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"
                    integrity="sha512-q/dWJ3kcmjBLU4Qc47E4A9kTB4m3wuTY7vkFJDTZKjTs8jhyGQnaUrxa0Ytd0ssMZhbNua9hE+E7Qv1j+DyZwA=="
                    crossorigin="anonymous"></script>
            <!--jquery-->
            <script src="../../static/js/jquery-3.4.1.js"></script>
            <script src="../../static/js/chat/chat_page.js"></script>

            <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=6221c36b59f1986aa65ac5f0"
                    type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
                    crossorigin="anonymous"></script>
            <script src="js/webflow.js" type="text/javascript"></script>
            <!-- [if lte IE 9]>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script>
            <![endif] -->
        </body>
    </html>
{% endblock %}
